name: 'Upload Translations to koro-i18n'
description: 'Upload translation files to koro-i18n platform with git blame'
branding:
  icon: 'upload-cloud'
  color: 'blue'

inputs:
  project-name:
    description: 'Project name on koro-i18n platform'
    required: true
  platform-url:
    description: 'Platform URL'
    required: false
    default: 'https://koro.f3liz.workers.dev'
  config-path:
    description: 'Path to .koro-i18n.repo.config.toml'
    required: false
    default: '.koro-i18n.repo.config.toml'

runs:
  using: 'composite'
  steps:
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20'
    
    - name: Install koro-i18n client
      shell: bash
      run: npm install -g @koro-i18n/client
    
    - name: Upload translations
      shell: bash
      run: koro-i18n ${{ inputs.config-path }}
      env:
        I18N_PLATFORM_URL: ${{ inputs.platform-url }}
