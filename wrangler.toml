name = "koro"
main = "src/workers.ts"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat_v2"]

# Serve frontend static files
[assets]
directory = "dist/frontend"
binding = "ASSETS"

[vars]
ENVIRONMENT = "production"
PLATFORM_URL = "https://koro.f3liz.workers.dev"
# Comma-separated list of GitHub usernames allowed to create projects
# Leave empty to allow all users
ALLOWED_PROJECT_CREATORS = "nyanrus"



# D1 Database Configuration
[[d1_databases]]
binding = "DB"
database_name = "koro-i18n-db"
database_id = "bed11b2a-88f2-4a83-b0f3-f77ab3ca1050"

# Durable Objects Configuration
[[durable_objects.bindings]]
name = "OAUTH_STATE"
class_name = "OAuthStateDO"
script_name = "koro"

[[durable_objects.bindings]]
name = "JWKS_CACHE"
class_name = "JWKSCacheDO"
script_name = "koro"

[[durable_objects.bindings]]
name = "GITHUB_RATE_LIMIT"
class_name = "GitHubRateLimitDO"
script_name = "koro"

[[durable_objects.bindings]]
name = "TRANSLATION_STATUS"
class_name = "TranslationStatusDO"
script_name = "koro"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["OAuthStateDO", "JWKSCacheDO", "GitHubRateLimitDO"]

[[migrations]]
tag = "v2"
new_sqlite_classes = ["TranslationStatusDO"]

# # Development Environment
# [env.development]
# name = "i18n-platform-dev"
# [env.development.vars]
# ENVIRONMENT = "development"
# PLATFORM_URL = "http://localhost:8787"

# [[env.development.d1_databases]]
# binding = "DB"
# database_name = "i18n-platform-db-dev"
# database_id = "REPLACE_WITH_YOUR_DEV_DATABASE_ID"
